# Data Sync Worker Configuration

name = "neetlogiq-data-sync"
main = "src/index.ts"
compatibility_date = "2024-01-01"
node_compat = true

# This Worker is triggered by R2 events via Queue
# It automatically clears cache when data is updated

# KV namespace binding for cache clearing
[[kv_namespaces]]
binding = "CACHE"
id = ""  # TODO: Add your KV namespace ID (same as other workers)
preview_id = ""  # TODO: Add your preview KV namespace ID

# Queue consumer configuration
[[queues.consumers]]
queue = "data-sync-queue"
max_batch_size = 10
max_batch_timeout = 30
max_retries = 3
dead_letter_queue = "data-sync-dlq"

# Queue producer (for manual testing)
[[queues.producers]]
binding = "DATA_SYNC_QUEUE"
queue = "data-sync-queue"

# Environment variables
[vars]
ENVIRONMENT = "production"

# Development environment
[env.dev]
name = "neetlogiq-data-sync-dev"

[env.dev.vars]
ENVIRONMENT = "development"
